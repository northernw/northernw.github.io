---
title: 推荐系统
tags:
  - 推荐系统
categories:
  - 学习笔记
date: 2022-01-24 19:54:18
---

2021.12.17

https://zhuanlan.zhihu.com/p/80069337
协同过滤
物以类聚：基于项目的协同过滤，为用户推荐喜欢的物品相似的物品，计算的是物品之间的相似度
人以群分：基于用户的协同过滤，为用户推荐相似用户喜欢的物品，计算的是用户之间的相似度
上面一节简单介绍了协同过滤的思想，基于协同过滤的两种推荐算法，核心思想是很朴素的”物以类聚、人以群分“的思想。所谓物以类聚，就是计算出每个标的物最相似的标的物列表，我们就可以为用户推荐用户喜欢的标的物相似的标的物，这就是基于物品(标的物)的协同过滤。所谓人以群分，就是我们可以将与该用户相似的用户喜欢过的标的物的标的物推荐给该用户(而该用户未曾操作过)，这就是基于用户的协同过滤。

![70F59493-EBA7-4C09-95E6-AACC8B0937FC](/Users/wangyuanqing1/github/northernw.github.io/image/recommendation-system/70F59493-EBA7-4C09-95E6-AACC8B0937FC.jpg)


我们将用户对标的物的评分(或者隐式反馈，如点击、收藏等)构建如下用户行为矩阵(见下面图2)，矩阵的某个元素代表某个用户对某个标的物的评分(如果是隐式反馈，值为1)，如果某个用户对某个标的物未产生行为，值为0。其中行向量代表某个用户对所有标的物的评分向量，列向量代表所有用户对某个标的物的评分向量。有了行向量和列向量，我们就可以计算用户与用户之间、标的物与标的物之间的相似度了。具体来说，行向量之间的相似度就是用户之间的相似度，列向量之间的相似度就是标的物之间的相似度。

为了避免误解，这里简单解释一下隐式反馈，只要不是用户直接评分的操作行为都算隐式反馈，包括浏览、点击、播放、收藏、评论、点赞、转发等等。有很多隐式反馈是可以间接获得评分的，后面会讲解。如果不间接获得评分，就用0、1表示是否操作过。

![31EA3049-4CAF-4C7E-8778-776BFC381C22](/Users/wangyuanqing1/github/northernw.github.io/image/recommendation-system/31EA3049-4CAF-4C7E-8778-776BFC381C22.jpg)

图2：用户对标的物的操作行为矩阵
相似度的计算可以采用cosine余弦相似度算法来计算两个向量

(可以是上图的中行向量或者列向量)之间的相似度：

![078BBB2E-E8B9-4743-B075-0DBAF4598E9C](/Users/wangyuanqing1/github/northernw.github.io/image/recommendation-system/078BBB2E-E8B9-4743-B075-0DBAF4598E9C.jpg)


https://zhuanlan.zhihu.com/p/34004488
推荐系统干货笔记
有大佬网站、书籍、会议、开源代码

https://www.yunyingpai.com/content/632422.html
运营角度：内容分发的推荐策略 

![AF3379DF-6B8C-40CD-9078-65A9020A9F6E](/Users/wangyuanqing1/github/northernw.github.io/image/recommendation-system/AF3379DF-6B8C-40CD-9078-65A9020A9F6E.jpg)

热度推荐

![D6769F34-E4F8-40D2-87D3-A9B556B2B106](/Users/wangyuanqing1/github/northernw.github.io/image/recommendation-system/D6769F34-E4F8-40D2-87D3-A9B556B2B106.png)

1）views：浏览量，对浏览量做了一次取对数，主要是为了防止某些浏览量较大的内容异军突起，待在榜单迟迟不动。
2）recommendScore：点赞数，作为文章热门程度的考虑因素。
3）articleComments：评论数，为了降低刷评论的影响，对其作了一次取对数操作。
4）(age/2 + update/2 + 1) ^ i：分母是对时间因子的考虑，宏观上来看，就是文章热度和创建时间成反比；细节上体现为指数函数，可以通过对 i 变量的调控来改变时间因子在对热度的影响。
6）age：内容发布时间
7）update：内容最后更新时间
8）i：重力因子，取值的大小会直接决定热门排序
对于同一内容，上面的计算公式均可化简为：

![90A2CBD7-750F-405D-9F45-C100FBFCC383](/Users/wangyuanqing1/github/northernw.github.io/image/recommendation-system/90A2CBD7-750F-405D-9F45-C100FBFCC383.png)

可以看出，热度和创建时间成反比，那么这个反比的值最终就由重力因子i 来影响。
如果想要突出新热内容、过滤时间过久的热门内容，需要增大重力因子，若是如同周热门和月热门则需要按时间要求依次逐渐降小i 值。


https://www.cnwebe.com/articles/180956.html
如果把推荐系统简单拆开来看，推荐系统主要是由数据、算法、架构三个方面组成。
1. 数据主要提供推荐所必须的信息，包括用户和内容的特征信息，用户对于内容的行为反馈数据等；
2. 算法主要是提供策略和逻辑，在海量的数据下，人工策略已经很难进行分析和干涉，因此需要一套算法来自动的进行信息逻辑处理和返回推荐的内容；
3. 架构主要是承载数据和算法的平台，对接上下游的数据和逻辑，保证系统能够稳定、实时自动的运行。

![2A80F47A-31D2-445E-AD0A-CCF99AF3D691](/Users/wangyuanqing1/github/northernw.github.io/image/recommendation-system/2A80F47A-31D2-445E-AD0A-CCF99AF3D691.png)

推荐算法核心步骤：召回+排序
多路召回

![49233C25-4729-408B-88AD-0DCE1F65EE81](/Users/wangyuanqing1/github/northernw.github.io/image/recommendation-system/49233C25-4729-408B-88AD-0DCE1F65EE81.png)

粗排一般对召回的大量内容，进行一些简单的融合排序，比如多个召回源，各取TOP k，将大量的召回内容，截断到一个可控的量级（一般到千的量级），不然精排阶段会非常耗时；
精排一般都采用模型进行排序，排序后召回内容会到百量级。
