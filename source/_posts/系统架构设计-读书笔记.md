---
title: 系统架构设计-读书笔记
tags:
  - null
categories:
  - null
date: 2021-02-20 13:56:50
typora-copy-images-to: ../../image
---

《系统架构设计》

郑天明

2017年6月

人民邮电出版社有限公司

科学科技榜-计算机



普通程序员向系统架构师<u>转型</u>的<u>思路</u>、<u>方法</u>和<u>工程实践</u>。

意识形态的转变、技术体系的掌握、系统工程学的拓展、各项软技能的提升。



业界主流架构师需掌握的技术知识领域，需具备的技术管理能力。



## 第一篇 转型概述

### 转型

1. 架构设计基本概念
2. 架构师角色
3. 架构师的视图和视角
4. 如何转型？
5. 小结



#### 摘录

##### 软件架构师

分析和设计一个软件系统及管理其研发过程，需要具备专业的知识、丰富的实践经验、良好的个人综合能力。



##### 视图

上下文视图

功能视图

数据视图

开发视图

部署视图

运维视图



方法论和工程实践。

什么是方法论？



##### 视角

1. 安全性
   1. 体现的是控制、监控和审计 对资源的访问性和执行能力，以及从安全漏洞中恢复的能力。
   2. 需要进行安全性控制的内容称为资源Resource
   3. 能访问资源的人或系统称为访问主体Subject
   4. 切入点：根据不同的访问主体对不同的资源进行精细化控制，包含建立完善的用户权限管理系统，并提供相应安全策略。【方法论？】
   5. 架构设计：对用户进行身份认证Authentication，授权访问Authorization，通过加密解密确保信息保密性和完整性，提供单点登录Single Sign On（SSO）安全性平台，使用第三方安全性基础框架等，都是安全性架构设计的常见手段。【工程实践？】

2. 性能
   1. 体现在 系统在指定的性能状况下执行，以及将来需要时提供增长的处理能力。
   2. 切入点
      1. 核心功能响应时间
      2. 系统吞吐量
      3. 部署的<u>可伸缩性</u>Scalability
      4. 性能问题的可预测性？
      5. 峰值负载
   3. 架构设计
      1. 对核心业务链路和活动进行分解，把串行操作变为并行操作
      2. 对需要重复执行的处理过程进行优化
      3. 重用资源和结果
      4. 使用异步处理
      5. 放宽事务一致性
      6. 转换数据强一致性为弱一致性

3. 可用性
   1. 系统在需要时能够完整地提供服务，并有效处理影响系统可用性故障的能力。
   2. 切入点：先明确服务的类型，不同类型的服务的可用性要求不尽相同；系统升级、停机、维修实践，系统备份，灾难恢复，有不同的实施计划。
   3. 架构设计上：使用容错硬件、容错软件，采用主流的集群和负载均衡机制，加强日志管理和分析，采用组件复制策略，建立完备的备份和灾难恢复方案

4. 可扩展性 Extensibility

   1. 指系统在经历不可避免的变更时足够灵活，是针对提供这样的灵活性所要付出的成本进行平衡的能力。【很拗口】

      可伸缩指的是性能（具备好的伸缩性：水平增加机器、垂直增加硬件，即能避免系统出现性能瓶颈）。可扩展指的是业务（具备好的扩展性：往系统中添加新业务时，不改变原有的各个子系统，而只需把新业务封闭在一个新的子系统中）。

   2. 实现可扩展性的切入点：加强产品管理，从业务需求的源头把控变化，在业务进入开发流程前进行梳理，避免引入不需要的变化。对于已经进入开发流程的变化，把握变化的维度和量级，从交付、开发复杂度等角度找到提升可扩展性的方法。

   3. 架构设计上：梳理系统的变化，并把变化抽象成扩展点，对这些扩展点创建可扩展的接口、应用促进变更的设计技术

5. 其他视角

   1. 易用性
   2. 开发资源和效率
   3. 国际化视角



##### 方法论

1. 了解主流软件架构风格、模式和模型，通过整合各种架构体系形成自身的架构设计思想
2. 能够对主流架构设计方法进行阐述、把握主流技术体系知识领域及相应的原理
3. 针对软件开发生命周期的系统工程，能够理解软件工程、业务架构、敏捷方法、产品交付等概念
4. 了解各种软技能需求及相应的应对方法



## 第二篇 软件架构设计知识体系

### 软件架构 体系结构

#### 1. 软件体系架构

随着软件复杂度的提升和软件开发技术的进步，更多的业务系统不再或不需关注算法设计和数据结构，系统的层次化设计和高层次的结构化设计成为一个开发成败的决定性因素。



#### 2. 架构风格

描述某一特定领域中系统组织和表现的惯用方式。

1. 分布式
   1. 作为一种基础架构风格，为不同系统的交互提供通信规范，屏蔽底层平台细节
   2. 进行信息整合，消除信息孤岛
   3. 3种表现形式：
      1. 消息传递。一对多或者一对一。耦合较低。
      2. 发布-订阅。发布事件。一对多。
      3. Broker。服务端将组件注册到Broker，通过暴露接口的方式允许客户端接入服务。客户端通过Broker发送请求。即远程过程调用RPC。耦合度较高。
      4. Broker比前两种更需要考虑服务之间的技术体系、实现机制及时间上的交互顺序。
      5. ![image-20210224174001484](/github/northernw.github.io/image/image-20210224174001484.png)

2. 事件驱动

   1. （事件驱动架构风格在网络通信中的应用）

   2. 事件源、事件分发器、事件响应程序

   3. 5种IO模型

      ![image-20210224175901144](/github/northernw.github.io/image/image-20210224175901144.png)

   4. Reactor模式，体现的是IO复用思想。使用一个单线程构建事件循环，从多个事件源获取事件，分发给对应的事件响应程序。

      Reactor也分三种版本：

      1. Reactor单线程模型
      2. Reactor多线程模型
      3. Reactor主从模型

      

3. 系统结构

   1. 分层结构

   2. 交互型结构，常见的有MVC（Model View Controller）、MVP（Model View Presenter）、MVVM（Model View ViewModel）

   3. 消息总线，理论基础是消息驱动的编程方法、计算机硬件总线概念。

      可以视为分布式消息传递风格的扩展和延伸。

   4. 适配与扩展

      适配器Adapter模式

      门面Facade模式

      管道-过滤器风格

   <img src="/github/northernw.github.io/image/image-20210224201800790.png" alt="image-20210224201800790" style="zoom:50%;" />

   <img src="/github/northernw.github.io/image/image-20210224201818627.png" alt="image-20210224201818627" style="zoom:50%;" />

   <img src="/github/northernw.github.io/image/image-20210224201841359.png" alt="image-20210224201841359" style="zoom:50%;" />

   <img src="/github/northernw.github.io/image/image-20210224201854583.png" alt="image-20210224201854583" style="zoom:50%;" />



#### 3. 架构模式

基于子系统或模块间的关系层次，描述架构粗粒度的解决方案，描述系统的内部组织。

1. 数据访问

   1. 数据映射器

      映射思想在软件设计过程中非常常用，主要用于分离不同层次之间的数据耦合。

   2. 数据仓库

      Repository，数据残酷协调领域和数据映射层。

      提供了面向领域的数据方式，而不是纯粹的数据访问方式。

2. 服务定位

   解决的问题：解耦服务提供者和用户，用户无需直接访问具体的服务提供者类

   解决方案：服务注册Registration和发现Discovery机制，比如JNDI

   【有点像具体依赖抽象..】

   <img src="/github/northernw.github.io/image/image-20210224203407137.png" alt="image-20210224203407137" style="zoom:30%;" />

3. 异步化

   1. 生产者-消费者
   2. 半同步半异步：同步操作和异步IO模型集成在一起

4. 资源管理

   1. 资源：数据库会话、网络连接、分布式服务和组件等
   2. 基本需求：性能、可伸缩性、灵活性
   3. 管理从创建到销毁的整个过程
   4. 模式
      1. 资源生命周期Lifecycle管理模式
         1. 表现为一个容器Container。比如Spring容器，管理Java Bean的生命周期。
         2. 资源对象的创建、删除等由容器自动完成
         3. 客户端通过查询获取特定资源并使用该资源
      2. 资源有效性管理模式
         1. 最大化复用现有资源，以满足特定场景下的资源利用需求
         2. 数据库会话、网络连接等非托管资源，生命周期不受容器管理，且创建和销毁成本高，如果不加控制任由程序无限制使用，很容易出现性能和可用性问题
         3. 基本思路：池化
            1. 对象池：数据库连接
            2. 线程池
      3. 资源创建策略模式
         1. 复杂对象的构建与组装方式分离
         2. Builder模式
      4. 资源获取策略模式
         1. 延迟获取Lazy Acquisition、延迟加载 Lazy Load
         2. 尽快获取 Eager Acquisition
         3. 部分获取Partial Acquisition
      5. 资源释放策略模式
         1. 自动垃圾回收Auto Garbage Collection
         2. 引用计数 Reference Count

5. 依赖管理

   过多的依赖会增加系统复杂性，降低代码维护性，阻碍开发

   1. 基本依赖关系
   2. 消除循环依赖..



#### 4. 架构模型

### 领域驱动设计

1. 面向领域思想
2. 面向领域的策略设计
3. 面向领域的技术设计

### 分布式系统架构设计

1. 分布式系统

2. PRC架构

3. 分布式服务架构

   服务治理，包括负载均衡与集群容错、服务路由与服务注册、服务发布与引用、服务监控。

4. 分布式服务框架dubbo

5. 微服务架构

### 架构实现技术体系

1. 缓存与性能优化
2. 消息传递系统
3. 企业服务总线
4. 数据分析处理
5. 安全性



## 第三篇 架构设计 系统工程

### 软件工程学

1. 软件工程学概述
2. 软件实现
   1. UML建模
      1. 用例建模：用例图
      2. 静态建模：类图
      3. 动态建模：序列图、状态图和活动图
      4. 架构建模：部署图
3. 项目管理
4. 过程改进

### 敏捷方法与实践

1. 概述
2. 极限编程与工程实践
3. Scrum与过程管理
4. 敏捷方法论与架构师

### 软件交付模型

1. 概述
2. 配置管理
3. 持续集成
4. 交付工作流



## 第四篇 架构师软技能

### 架构师必备软技能

1. 架构师与外部环境
2. 架构师与自身团队
3. 架构师与意识形态